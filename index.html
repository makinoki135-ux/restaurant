<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AYAKAãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        /* ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
        body { font-family: 'Arial', sans-serif; margin: 20px; background-color: #f7f7f7; }
        .container { max-width: 800px; margin: auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1, h2 { color: #333; text-align: center; }
        .screen { border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; border-radius: 5px; background-color: #fff; }
        /* ç”»é¢é·ç§»ã®ãŸã‚ã«å¿…è¦ãªCSS */
        .hidden { display: none !important; } /* !important ã‚’è¿½åŠ ã—ã¦ç¢ºå®Ÿã«éè¡¨ç¤ºã«ã™ã‚‹ */
        button { padding: 10px 15px; margin: 5px; cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 5px; transition: background-color 0.3s; }
        button:hover { background-color: #45a049; }
        select, input[type="number"] { padding: 8px; margin: 5px; border-radius: 4px; border: 1px solid #ccc; }
        .menu-category h3 { border-bottom: 2px solid #ddd; padding-bottom: 5px; margin-top: 20px; }
        .menu-item { margin-bottom: 10px; padding: 10px; border: 1px dashed #eee; display: flex; justify-content: space-between; align-items: center; }
        .total-area { text-align: right; font-size: 1.2em; font-weight: bold; margin-top: 20px; padding-top: 10px; border-top: 2px solid #333; }
        .receipt-item { display: flex; justify-content: space-between; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ½ï¸ AYAKAãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 2 ğŸ½ï¸</h1>

    <div id="inputScreen" class="screen">
        <h2>ã‚¹ãƒ†ãƒƒãƒ— 1: ã”æ¡ˆå†…</h2>
        <label for="guests">äººæ•°:</label>
        <select id="guests">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </select>
        
        <label for="tableNumber">åº§å¸­ç•ªå·:</label>
        <select id="tableNumber">
            <option value="T1">ãƒ†ãƒ¼ãƒ–ãƒ« 1</option>
            <option value="T2">ãƒ†ãƒ¼ãƒ–ãƒ« 2</option>
            <option value="T3">ãƒ†ãƒ¼ãƒ–ãƒ« 3</option>
            <option value="T4">ãƒ†ãƒ¼ãƒ–ãƒ« 4</option>
            <option value="T5">ãƒ†ãƒ¼ãƒ–ãƒ« 5</option>
        </select>
        <br><br>
        <button onclick="startOrder()">ã‚ªãƒ¼ãƒ€ãƒ¼é–‹å§‹</button>
    </div>

    <div id="orderScreen" class="screen hidden">
        <h2>ã‚¹ãƒ†ãƒƒãƒ— 2: ã‚ªãƒ¼ãƒ€ãƒ¼å…¥åŠ›</h2>
        <p>ã‚ˆã†ã“ãã€**<span id="currentTable"></span>**ã¸ï¼äººæ•°: **<span id="currentGuests"></span>**åæ§˜</p>
        
        <div class="menu-category">
            <h3>ğŸ ãƒ¡ã‚¤ãƒ³æ–™ç†</h3>
            <div id="mainMenu"></div>
        </div>

        <div class="menu-category">
            <h3>ğŸŸ ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h3>
            <div id="sideMenu"></div>
        </div>

        <div class="menu-category">
            <h3>ğŸ¥¤ é£²ã¿ç‰©</h3>
            <div id="drinkMenu"></div>
        </div>
        
        <br>
        <div class="total-area">åˆè¨ˆé‡‘é¡: <span id="currentOrderTotal">0</span> å††</div>
        <button onclick="goToCheckout()">ä¼šè¨ˆã¸é€²ã‚€</button>
        <button onclick="resetSystem()">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
    </div>

    <div id="checkoutScreen" class="screen hidden">
        <h2>ã‚¹ãƒ†ãƒƒãƒ— 3: ä¼šè¨ˆ</h2>
        <h3>ã”æ³¨æ–‡å†…å®¹ã®ç¢ºèª</h3>
        <div id="orderSummary"></div>
        <div class="total-area">
            åˆè¨ˆé‡‘é¡: <span id="finalTotal">0</span> å††
        </div>
        
        <h3>ãŠæ”¯æ‰•ã„æ–¹æ³•</h3>
        <select id="paymentMethod">
            <option value="cash">ç¾é‡‘</option>
            <option value="card">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰</option>
            <option value="mobile">ãƒ¢ãƒã‚¤ãƒ«æ±ºæ¸ˆ</option>
        </select>
        <br><br>
        <button onclick="finishPayment()">æ±ºæ¸ˆå®Œäº†</button>
        <button onclick="resetSystem()">æ–°ã—ã„ãŠå®¢æ§˜</button>
    </div>
</div>

<script>
// --- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ ---
const MENU = {
    main: [
        { name: "ãƒãƒ³ãƒãƒ¼ã‚°ãƒ—ãƒ¬ãƒ¼ãƒˆ", price: 850 },
        { name: "ãŠå­æ§˜ã‚«ãƒ¬ãƒ¼", price: 600 },
        { name: "ã¨ã‚ã¨ã‚ã‚ªãƒ ãƒ©ã‚¤ã‚¹", price: 780 },
        { name: "ãƒŸãƒƒã‚¯ã‚¹ãƒ”ã‚¶", price: 920 },
        { name: "ãã¤ã­ã†ã©ã‚“", price: 700 }
    ],
    side: [
        { name: "ãƒ•ãƒ©ã‚¤ãƒ‰ãƒãƒ†ãƒˆ", price: 350 },
        { name: "ãƒŸãƒ‹ã‚µãƒ©ãƒ€", price: 280 },
        { name: "ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­ (2æš)", price: 450 }
    ],
    drink: [
        { name: "ã‚ªãƒ¬ãƒ³ã‚¸ã‚¸ãƒ¥ãƒ¼ã‚¹", price: 250 },
        { name: "ã‚³ãƒ¼ãƒ©", price: 250 },
        { name: "ãƒ›ãƒƒãƒˆã‚³ãƒ¼ãƒ’ãƒ¼", price: 300 },
        { name: "ãƒŸãƒ«ã‚¯", price: 200 }
    ]
};

// --- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° ---
let currentOrder = [];
let totalAmount = 0;
let tableNum = "";
let guestCount = 0;

// --- ç”»é¢è¦ç´ ã®å–å¾—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰---
const inputScreen = document.getElementById('inputScreen');
const orderScreen = document.getElementById('orderScreen');
const checkoutScreen = document.getElementById('checkoutScreen');

// --- ç”»é¢é·ç§»é–¢æ•° ---

/**
 * æœ€åˆã®ç”»é¢ã‹ã‚‰ã‚ªãƒ¼ãƒ€ãƒ¼ç”»é¢ã¸é·ç§»ã—ã¾ã™ã€‚
 */
function startOrder() {
    guestCount = parseInt(document.getElementById('guests').value);
    tableNum = document.getElementById('tableNumber').value;

    if (guestCount < 1) {
        alert("äººæ•°ã¯1åä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
    }

    // â˜…ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ: ç”»é¢ã®éè¡¨ç¤º/è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
    inputScreen.classList.add('hidden');
    orderScreen.classList.remove('hidden');

    document.getElementById('currentTable').textContent = tableNum;
    document.getElementById('currentGuests').textContent = guestCount;
    
    renderMenu();
}

/**
 * ã‚ªãƒ¼ãƒ€ãƒ¼ç”»é¢ã‹ã‚‰ä¼šè¨ˆç”»é¢ã¸é·ç§»ã—ã¾ã™ã€‚
 */
function goToCheckout() {
    if (currentOrder.length === 0) {
        alert("ä½•ã‚‚æ³¨æ–‡ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
        return;
    }

    // â˜…ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ: ç”»é¢ã®éè¡¨ç¤º/è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
    orderScreen.classList.add('hidden');
    checkoutScreen.classList.remove('hidden');
    
    renderSummary();
}

/**
 * æ±ºæ¸ˆã‚’å®Œäº†ã—ã€çµ‚äº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
 */
function finishPayment() {
    const method = document.getElementById('paymentMethod').value;
    alert(`åˆè¨ˆ ${totalAmount} å††ã‚’${method === 'cash' ? 'ç¾é‡‘' : method === 'card' ? 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰' : 'ãƒ¢ãƒã‚¤ãƒ«æ±ºæ¸ˆ'}ã§ã„ãŸã ãã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼`);
    // æ±ºæ¸ˆå®Œäº†å¾Œã€æ–°ã—ã„ãŠå®¢æ§˜ã®ãŸã‚ã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
    resetSystem();
}

/**
 * ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚’ãƒªã‚»ãƒƒãƒˆã—ã€åˆæœŸç”»é¢ã«æˆ»ã—ã¾ã™ã€‚
 */
function resetSystem() {
    currentOrder = [];
    totalAmount = 0;
    tableNum = "";
    guestCount = 0;
    document.getElementById('currentOrderTotal').textContent = 0;
    
    // â˜…ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ: å…¨ç”»é¢ã®çŠ¶æ…‹ã‚’åˆæœŸåŒ–ï¼ˆinputScreenã ã‘è¡¨ç¤ºï¼‰
    inputScreen.classList.remove('hidden');
    orderScreen.classList.add('hidden');
    checkoutScreen.classList.add('hidden');

    // äººæ•°ã¨åº§å¸­ã‚’åˆæœŸå€¤ã«æˆ»ã™
    document.getElementById('guests').value = 1;
    document.getElementById('tableNumber').value = 'T1';

    // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æ•°é‡è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆå†æç”»ï¼‰
    renderMenu(); 
}

// --- ãƒ¡ãƒ‹ãƒ¥ãƒ¼æç”»é–¢æ•° ---

/**
 * ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã‚’HTMLã«æç”»ã—ã¾ã™ã€‚
 */
function renderMenu() {
    document.getElementById('mainMenu').innerHTML = createMenuHTML('main');
    document.getElementById('sideMenu').innerHTML = createMenuHTML('side');
    document.getElementById('drinkMenu').innerHTML = createMenuHTML('drink');
    updateTotal();
}

/**
 * ç‰¹å®šã®ã‚«ãƒ†ã‚´ãƒªã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼HTMLã‚’ç”Ÿæˆã—ã¾ã™ã€‚
 * @param {string} category - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚«ãƒ†ã‚´ãƒª ('main', 'side', 'drink')
 * @returns {string} ç”Ÿæˆã•ã‚ŒãŸHTMLæ–‡å­—åˆ—
 */
function createMenuHTML(category) {
    let html = '';
    MENU[category].forEach((item, index) => {
        const orderItem = currentOrder.find(o => o.name === item.name);
        const quantity = orderItem ? orderItem.quantity : 0;
        
        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ åã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€IDã‚’å®‰å…¨ã«ã™ã‚‹
        const safeNameId = item.name.replace(/[\s\(\)]/g, ''); 

        html += `
            <div class="menu-item">
                <span>${item.name} (${item.price}å††)</span>
                <div>
                    <button onclick="updateOrder('${item.name}', ${item.price}, -1)">-</button>
                    <span id="${safeNameId}Count">${quantity}</span>
                    <button onclick="updateOrder('${item.name}', ${item.price}, 1)">+</button>
                </div>
            </div>
        `;
    });
    return html;
}

// --- ã‚ªãƒ¼ãƒ€ãƒ¼å‡¦ç†é–¢æ•° ---

/**
 * æ³¨æ–‡å†…å®¹ã‚’æ›´æ–°ã—ã€åˆè¨ˆé‡‘é¡ã‚’å†è¨ˆç®—ã—ã¾ã™ã€‚
 * @param {string} name - å•†å“å
 * @param {number} price - ä¾¡æ ¼
 * @param {number} change - æ•°é‡ã®å¢—æ¸› (+1 ã¾ãŸã¯ -1)
 */
function updateOrder(name, price, change) {
    let item = currentOrder.find(o => o.name === name);
    const safeNameId = name.replace(/[\s\(\)]/g, ''); 

    if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
            currentOrder = currentOrder.filter(o => o.name !== name);
        }
    } else if (change > 0) {
        currentOrder.push({ name: name, price: price, quantity: 1 });
    }

    // ç”»é¢ä¸Šã®æ•°é‡è¡¨ç¤ºã‚’æ›´æ–°
    const countElement = document.getElementById(safeNameId + 'Count');
    if (countElement) {
        // ç¾åœ¨ã®æ•°é‡ã‚’å†è¨ˆç®—ã—ã¦è¡¨ç¤º
        const currentQuantity = currentOrder.find(o => o.name === name)?.quantity || 0;
        countElement.textContent = currentQuantity;
    } else if (currentOrder.length > 0) {
        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å†æç”»ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚‹ãŸã‚ã€totalã‚’æ›´æ–°
    }

    updateTotal();
}

/**
 * åˆè¨ˆé‡‘é¡ã‚’è¨ˆç®—ã—ã€ç”»é¢ã«è¡¨ç¤ºã‚’æ›´æ–°ã—ã¾ã™ã€‚
 */
function updateTotal() {
    totalAmount = currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    document.getElementById('currentOrderTotal').textContent = totalAmount;
    document.getElementById('finalTotal').textContent = totalAmount;
}

// --- ä¼šè¨ˆç”»é¢æç”»é–¢æ•° ---

/**
 * æ³¨æ–‡ã®æ¦‚è¦ã‚’ä¼šè¨ˆç”»é¢ã«æç”»ã—ã¾ã™ã€‚
 */
function renderSummary() {
    const summaryDiv = document.getElementById('orderSummary');
    summaryDiv.innerHTML = `<p>ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·: ${tableNum} / äººæ•°: ${guestCount}åæ§˜</p>`;

    let receiptHTML = '';
    currentOrder.forEach(item => {
        receiptHTML += `
            <div class="receipt-item">
                <span>${item.name} x ${item.quantity}</span>
                <span>${item.price * item.quantity} å††</span>
            </div>
        `;
    });
    summaryDiv.innerHTML += receiptHTML;
}

// åˆæœŸåŒ–å‡¦ç†
document.addEventListener('DOMContentLoaded', () => {
    // æœ€åˆã®ç”»é¢ï¼ˆinputScreenï¼‰ã ã‘ã‚’è¡¨ç¤ºã—ã€ä»–ã¯éè¡¨ç¤ºã«ã™ã‚‹
    inputScreen.classList.remove('hidden');
    orderScreen.classList.add('hidden');
    checkoutScreen.classList.add('hidden');
    renderMenu();
});
</script>

</body>
</html>