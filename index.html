<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AYAKAãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  (ã‚¬ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ ç‰ˆ)</title>
    <style>
        /* ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
        body { font-family: 'Arial', sans-serif; margin: 20px; background-color: #f7f7f7; }
        .container { max-width: 800px; margin: auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1, h2 { color: #333; text-align: center; }
        .screen { border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; border-radius: 5px; background-color: #fff; }
        .hidden { display: none !important; } 
        button { padding: 10px 15px; margin: 5px; cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 5px; transition: background-color 0.3s; }
        button:hover { background-color: #45a049; }
        select, input[type="number"] { padding: 8px; margin: 5px; border-radius: 4px; border: 1px solid #ccc; }
        .menu-category h3 { border-bottom: 2px solid #ddd; padding-bottom: 5px; margin-top: 20px; }
        .menu-item { margin-bottom: 10px; padding: 10px; border: 1px dashed #eee; display: flex; justify-content: space-between; align-items: center; }
        .total-area { text-align: right; font-size: 1.2em; font-weight: bold; margin-top: 20px; padding-top: 10px; border-top: 2px solid #333; }
        .receipt-item { display: flex; justify-content: space-between; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ½ï¸ AYAKAãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  ğŸ½ï¸</h1>

    <div id="inputScreen" class="screen">
        <h2>ã‚¹ãƒ†ãƒƒãƒ— 1: ã”æ¡ˆå†…</h2>
        <label for="guests">äººæ•°:</label>
        <select id="guests">
            <option value="1">1</option><option value="2">2</option><option value="3">3</option>
            <option value="4">4</option><option value="5">5</option><option value="6">6</option>
            <option value="7">7</option><option value="8">8</option>
        </select>
        
        <label for="tableNumber">åº§å¸­ç•ªå·:</label>
        <select id="tableNumber">
            <option value="T1">ãƒ†ãƒ¼ãƒ–ãƒ« 1</option><option value="T2">ãƒ†ãƒ¼ãƒ–ãƒ« 2</option>
            <option value="T3">ãƒ†ãƒ¼ãƒ–ãƒ« 3</option><option value="T4">ãƒ†ãƒ¼ãƒ–ãƒ« 4</option>
            <option value="T5">ãƒ†ãƒ¼ãƒ–ãƒ« 5</option>
        </select>
        <br><br>
        <button onclick="startOrder()">ã‚ªãƒ¼ãƒ€ãƒ¼é–‹å§‹</button>
    </div>

    <div id="orderScreen" class="screen hidden">
        <h2>ã‚¹ãƒ†ãƒƒãƒ— 2: ã‚ªãƒ¼ãƒ€ãƒ¼å…¥åŠ›</h2>
        <p>ã‚ˆã†ã“ãã€**<span id="currentTable"></span>**ã¸ï¼äººæ•°: **<span id="currentGuests"></span>**åæ§˜</p>
        
        <div class="menu-category">
            <h3>ğŸ– ãƒ¡ã‚¤ãƒ³æ–™ç† (ãƒãƒ³ãƒãƒ¼ã‚°ãƒ»ã‚°ãƒªãƒ«ãƒ»ã‚¹ãƒ†ãƒ¼ã‚­)</h3>
            <div id="mainMenu"></div>
        </div>
        
        <div class="menu-category">
            <h3>ğŸ› ã‚«ãƒ¬ãƒ¼ãƒ»ä¸¼ãƒ»ã‚ªãƒ ãƒ©ã‚¤ã‚¹</h3>
            <div id="riceMenu"></div>
        </div>

        <div class="menu-category">
            <h3>ğŸœ éººé¡ãƒ»ç”Ÿãƒ‘ã‚¹ã‚¿</h3>
            <div id="noodleMenu"></div>
        </div>
        
        <div class="menu-category">
            <h3>ğŸ• ãƒ”ã‚¶ãƒ»å¤§çš¿ç››ã‚Šåˆã‚ã›</h3>
            <div id="pizzaMenu"></div>
        </div>

        <div class="menu-category">
            <h3>ğŸŸ ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ & ã‚µãƒ©ãƒ€</h3>
            <div id="sideMenu"></div>
        </div>

        <div class="menu-category">
            <h3>ğŸ¥¤ ãƒ‰ãƒªãƒ³ã‚¯</h3>
            <div id="drinkMenu"></div>
        </div>
        
        <br>
        <div class="total-area">åˆè¨ˆé‡‘é¡: <span id="currentOrderTotal">0</span> å††</div>
        <button onclick="goToCheckout()">ä¼šè¨ˆã¸é€²ã‚€</button>
        <button onclick="resetSystem()">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
    </div>

    <div id="checkoutScreen" class="screen hidden">
        <h2>ã‚¹ãƒ†ãƒƒãƒ— 3: ä¼šè¨ˆ</h2>
        <h3>ã”æ³¨æ–‡å†…å®¹ã®ç¢ºèª</h3>
        <div id="orderSummary"></div>
        <div class="total-area">
            åˆè¨ˆé‡‘é¡: <span id="finalTotal">0</span> å††
        </div>
        
        <h3>ãŠæ”¯æ‰•ã„æ–¹æ³•</h3>
        <select id="paymentMethod">
            <option value="cash">ç¾é‡‘</option>
            <option value="card">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰</option>
            <option value="mobile">ãƒ¢ãƒã‚¤ãƒ«æ±ºæ¸ˆ</option>
        </select>
        <br><br>
        <button onclick="finishPayment()">æ±ºæ¸ˆå®Œäº†</button>
        <button onclick="resetSystem()">æ–°ã—ã„ãŠå®¢æ§˜</button>
    </div>
</div>

<script>
// --- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ (ã‚¬ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’åæ˜ ) ---
const MENU = {
    // æ—¢å­˜ã®ãƒ¡ã‚¤ãƒ³æ–™ç† (ãƒãƒ³ãƒãƒ¼ã‚°ãƒ»ã‚°ãƒªãƒ«ãƒ»ã‚¹ãƒ†ãƒ¼ã‚­)
    main: [
        { name: "ãƒãƒ¼ã‚ºINãƒãƒ³ãƒãƒ¼ã‚° (ãŠã‹ãš)", price: 890 },
        { name: "ãƒãƒ¼ã‚ºONãƒãƒ¼ã‚ºINãƒãƒ³ãƒãƒ¼ã‚° (ãŠã‹ãš)", price: 1050 },
        { name: "ãƒ“ãƒ¼ãƒ•100%ç²—æŒ½ãè‚‰åšã‚¹ãƒ†ãƒ¼ã‚­é¢¨ãƒãƒ³ãƒãƒ¼ã‚° (ãŠã‹ãš)", price: 1230 },
        { name: "ã­ãã¨å¤§è‘‰ãŠã‚ã—ãƒãƒ³ãƒãƒ¼ã‚° (ãŠã‹ãš)", price: 1290 },
        { name: "ã‚«ãƒƒãƒˆã‚¹ãƒ†ãƒ¼ã‚­(6æš) (ãŠã‹ãš)", price: 1290 },
        { name: "ã‚«ãƒƒãƒˆã‚¹ãƒ†ãƒ¼ã‚­è‚‰ç››ã‚Š (ãŠã‹ãš)", price: 1450 },
        { name: "ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼è‹¥é¶ã‚°ãƒªãƒ« ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚½ãƒ¼ã‚¹ (ãŠã‹ãš)", price: 900 },
        { name: "ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼è‹¥é¶ã‚°ãƒªãƒ« å¤§è‘‰ãŠã‚ã— (ãŠã‹ãš)", price: 1060 },
        { name: "ãƒã‚­ãƒ†ã‚­ ã‚¹ãƒ‘ã‚¤ã‚¹ç„¼ã (ãŠã‹ãš)", price: 1090 },
    ],
    // ã‚«ãƒ¬ãƒ¼ãƒ»ä¸¼ãƒ»ã‚ªãƒ ãƒ©ã‚¤ã‚¹
    rice: [
        { name: "ã‚ªãƒ ãƒ©ã‚¤ã‚¹ (ãƒ“ãƒ¼ãƒ•ã‚·ãƒãƒ¥ãƒ¼ã‚½ãƒ¼ã‚¹)", price: 1190 },
        { name: "ã­ãã¨ã‚ä¸¼", price: 1090 },
        { name: "ã‚¬ã‚¹ãƒˆã†ã™ã‚«ãƒ„ãƒ–ãƒ©ãƒƒã‚¯ã‚«ãƒ¬ãƒ¼", price: 1150 },
        { name: "ã‚¬ã‚¹ãƒˆãƒãƒ¼ã‚ºINãƒ–ãƒ©ãƒƒã‚¯ã‚«ãƒ¬ãƒ¼", price: 1290 },
        { name: "ã‚¬ã‚¹ãƒˆãƒ–ãƒ©ãƒƒã‚¯ã‚«ãƒ¬ãƒ¼ å…ƒæ°—ç››ã‚Š", price: 1560 },
        { name: "ã‚´ãƒ¼ã‚´ãƒ¼ã‚«ãƒ¬ãƒ¼ç›£ä¿® é‡‘æ²¢ã‚«ãƒ¬ãƒ¼", price: 990 },
        { name: "ãƒ¬ãƒ¢ãƒ³ãƒã‚­ãƒ³ã‚½ãƒ†ãƒ¼ ãƒã‚¸ãƒ«ã‚½ãƒ¼ã‚¹", price: 1300 },
        { name: "ã‹ã‚‰å¥½ã— å¼å½“", price: 1050 },
        { name: "ã‹ã‚‰å¥½ã— ç”˜ã¨ã‚ãƒ€ãƒ¬ å¼å½“", price: 1050 },
    ],
    // éººé¡ãƒ»ç”Ÿãƒ‘ã‚¹ã‚¿
    noodle: [
        { name: "ã‚µãƒ©ãƒ€ã†ã©ã‚“", price: 990 },
        { name: "æµ·è€ã¨è’¸ã—é¶ã®ã‚³ã‚¯æ—¨å†·éºº", price: 1000 },
        { name: "ãƒŸãƒ‹å¤§è‘‰ãŠã‚ã—ã†ã©ã‚“", price: 440 },
        { name: "ã“ãæ—¨ãƒŸãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ ç”Ÿãƒ‘ã‚¹ã‚¿", price: 1050 },
        { name: "ãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒ ç”Ÿãƒ‘ã‚¹ã‚¿", price: 980 },
        { name: "ãƒ™ãƒ¼ã‚³ãƒ³ã¨ã‚±ãƒ¼ãƒ«ã®ãƒšãºãŸã¾ ç”Ÿãƒ‘ã‚¹ã‚¿", price: 930 },
        { name: "ã—ã‚‰ã™ã¨ã­ãã®å‡ºæ±é†¤æ²¹ ç”Ÿãƒ‘ã‚¹ã‚¿", price: 1100 },
    ],
    // ãƒ”ã‚¶ãƒ»å¤§çš¿ç››ã‚Šåˆã‚ã›
    pizza: [
        { name: "ã‚¬ã‚¹ãƒˆè‚‰ç››ã‚Šã‚»ãƒƒãƒˆ (2~3äººå‰)", price: 2990 },
        { name: "ã‚¬ã‚¹ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚»ãƒƒãƒˆ", price: 1990 },
        { name: "ã‚¬ã‚¹ãƒˆãƒŸãƒƒã‚¯ã‚¹ã‚»ãƒƒãƒˆ", price: 1990 },
        { name: "ãŸã£ã·ã‚Šãƒãƒ¨ã‚³ãƒ¼ãƒ³ãƒ”ã‚¶", price: 850 },
        { name: "ãƒãƒ«ã‚²ãƒªãƒ¼ã‚¿ãƒ”ã‚¶", price: 950 },
        { name: "é­šä»‹ãŸã£ã·ã‚Šã‚·ãƒ¼ãƒ•ãƒ¼ãƒ‰ãƒ”ã‚¶", price: 1150 },
        { name: "è‡ªå®¶è£½ãƒ­ãƒ¼ã‚¹ãƒˆãƒã‚­ãƒ³", price: 1600 },
    ],
    // ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ & ã‚µãƒ©ãƒ€
    side: [
        { name: "å±±ç››ã‚Šãƒãƒ†ãƒˆãƒ•ãƒ©ã‚¤", price: 490 },
        { name: "ã¡ã‚‡ã„ç››ã‚Šãƒãƒ†ãƒˆãƒ•ãƒ©ã‚¤", price: 350 },
        { name: "è‹¥é¶ã‚¹ãƒ‘ã‚¤ã‚¹ç„¼ã", price: 500 },
        { name: "è‹¥é¶ã®å”æšã’ 5ã‚³", price: 500 },
        { name: "ã»ã†ã‚Œã‚“è‰ãƒ™ãƒ¼ã‚³ãƒ³", price: 440 },
        { name: "ãƒŸãƒ‹ã‚°ãƒªãƒ¼ãƒ³ã‚µãƒ©ãƒ€", price: 300 },
        { name: "æµ·è€ã‚¢ãƒœã‚«ãƒ‰ã¨ã‚±ãƒ¼ãƒ«ã®ã‚µãƒ©ãƒ€ (S)", price: 650 },
        { name: "è’¸ã—é¶ã¨ã‚±ãƒ¼ãƒ«ã®ã‚µãƒ©ãƒ€ (S)", price: 550 },
        { name: "ãŠã¤ã¾ã¿ã‚«ã‚­ãƒ•ãƒ©ã‚¤ 2ã‚³", price: 550 },
        { name: "ç„¼ããŸã¦æ˜å¤ªãƒˆãƒ¼ã‚¹ãƒˆ 2ã‚³", price: 530 },
        { name: "ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­&ãƒãƒ†ãƒˆãƒ•ãƒ©ã‚¤", price: 640 },
        { name: "ã¨ã†ã‚‚ã‚ã“ã—ã®ãƒã‚¿ãƒ¼ã‚¸ãƒ¥", price: 350 },
        { name: "å‘³å™Œæ±", price: 120 },
        { name: "ã”é£¯ (1äººå‰)", price: 300 },
    ],
    // ãƒ‰ãƒªãƒ³ã‚¯
    drink: [
        { name: "ã‚³ã‚«ãƒ»ã‚³ãƒ¼ãƒ©", price: 190 },
        { name: "çˆ½å¥ç¾èŒ¶", price: 180 },
        { name: "ã„ã‚ã¯ã™", price: 190 },
        { name: "ã‚¢ã‚¤ã‚·ãƒ¼ã‚¹ãƒ‘ãƒ¼ã‚¯", price: 190 },
        { name: "ã‚ªãƒ¬ãƒ³ã‚¸ã‚¸ãƒ¥ãƒ¼ã‚¹", price: 110 },
        // AYAKAãƒ¬ã‚¹ãƒˆãƒ©ãƒ³æ—¢å­˜ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰æ®‹ã™ã‚‚ã®
        { name: "ãƒ›ãƒƒãƒˆã‚³ãƒ¼ãƒ’ãƒ¼", price: 300 },
        { name: "ãƒŸãƒ«ã‚¯", price: 200 }
    ]
};

// --- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ç”»é¢è¦ç´ ã®å–å¾—ï¼ˆå‰å›ã®ä¿®æ­£ã®ã¾ã¾ï¼‰---
let currentOrder = [];
let totalAmount = 0;
let tableNum = "";
let guestCount = 0;

const inputScreen = document.getElementById('inputScreen');
const orderScreen = document.getElementById('orderScreen');
const checkoutScreen = document.getElementById('checkoutScreen');

// --- ç”»é¢é·ç§»é–¢æ•°ï¼ˆå‰å›ã®ä¿®æ­£ã®ã¾ã¾ï¼‰---

function startOrder() {
    guestCount = parseInt(document.getElementById('guests').value);
    tableNum = document.getElementById('tableNumber').value;
    if (guestCount < 1) {
        alert("äººæ•°ã¯1åä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
    }
    inputScreen.classList.add('hidden');
    orderScreen.classList.remove('hidden');
    document.getElementById('currentTable').textContent = tableNum;
    document.getElementById('currentGuests').textContent = guestCount;
    renderMenu();
}

function goToCheckout() {
    if (currentOrder.length === 0) {
        alert("ä½•ã‚‚æ³¨æ–‡ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
        return;
    }
    orderScreen.classList.add('hidden');
    checkoutScreen.classList.remove('hidden');
    renderSummary();
}

function finishPayment() {
    const method = document.getElementById('paymentMethod').value;
    alert(`åˆè¨ˆ ${totalAmount} å††ã‚’${method === 'cash' ? 'ç¾é‡‘' : method === 'card' ? 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰' : 'ãƒ¢ãƒã‚¤ãƒ«æ±ºæ¸ˆ'}ã§ã„ãŸã ãã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼`);
    resetSystem();
}

function resetSystem() {
    currentOrder = [];
    totalAmount = 0;
    tableNum = "";
    guestCount = 0;
    document.getElementById('currentOrderTotal').textContent = 0;
    
    inputScreen.classList.remove('hidden');
    orderScreen.classList.add('hidden');
    checkoutScreen.classList.add('hidden');

    document.getElementById('guests').value = 1;
    document.getElementById('tableNumber').value = 'T1';
    renderMenu(); 
}

// --- ãƒ¡ãƒ‹ãƒ¥ãƒ¼æç”»é–¢æ•°ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼è¦ç´ ã®IDã‚’è¿½åŠ ï¼‰---

function renderMenu() {
    document.getElementById('mainMenu').innerHTML = createMenuHTML('main');
    document.getElementById('riceMenu').innerHTML = createMenuHTML('rice'); // New
    document.getElementById('noodleMenu').innerHTML = createMenuHTML('noodle'); // New
    document.getElementById('pizzaMenu').innerHTML = createMenuHTML('pizza'); // New
    document.getElementById('sideMenu').innerHTML = createMenuHTML('side');
    document.getElementById('drinkMenu').innerHTML = createMenuHTML('drink');
    updateTotal();
}

function createMenuHTML(category) {
    let html = '';
    MENU[category].forEach((item, index) => {
        const orderItem = currentOrder.find(o => o.name === item.name);
        const quantity = orderItem ? orderItem.quantity : 0;
        
        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ åã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€IDã‚’å®‰å…¨ã«ã™ã‚‹
        const safeNameId = item.name.replace(/[\s\(\)&\/\-]/g, ''); 

        html += `
            <div class="menu-item">
                <span>${item.name} (${item.price}å††)</span>
                <div>
                    <button onclick="updateOrder('${item.name.replace(/'/g, "\\'")}', ${item.price}, -1)">-</button>
                    <span id="${safeNameId}Count">${quantity}</span>
                    <button onclick="updateOrder('${item.name.replace(/'/g, "\\'")}', ${item.price}, 1)">+</button>
                </div>
            </div>
        `;
    });
    return html;
}

// --- ã‚ªãƒ¼ãƒ€ãƒ¼å‡¦ç†é–¢æ•°ï¼ˆå‰å›ã®ä¿®æ­£ã®ã¾ã¾ï¼‰---

function updateOrder(name, price, change) {
    let item = currentOrder.find(o => o.name === name);
    const safeNameId = name.replace(/[\s\(\)&\/\-]/g, ''); 

    if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
            currentOrder = currentOrder.filter(o => o.name !== name);
        }
    } else if (change > 0) {
        currentOrder.push({ name: name, price: price, quantity: 1 });
    }

    const countElement = document.getElementById(safeNameId + 'Count');
    if (countElement) {
        const currentQuantity = currentOrder.find(o => o.name === name)?.quantity || 0;
        countElement.textContent = currentQuantity;
    }

    updateTotal();
}

function updateTotal() {
    totalAmount = currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    document.getElementById('currentOrderTotal').textContent = totalAmount;
    document.getElementById('finalTotal').textContent = totalAmount;
}

function renderSummary() {
    const summaryDiv = document.getElementById('orderSummary');
    summaryDiv.innerHTML = `<p>ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·: ${tableNum} / äººæ•°: ${guestCount}åæ§˜</p>`;

    let receiptHTML = '';
    currentOrder.forEach(item => {
        receiptHTML += `
            <div class="receipt-item">
                <span>${item.name} x ${item.quantity}</span>
                <span>${item.price * item.quantity} å††</span>
            </div>
        `;
    });
    summaryDiv.innerHTML += receiptHTML;
}

document.addEventListener('DOMContentLoaded', () => {
    inputScreen.classList.remove('hidden');
    orderScreen.classList.add('hidden');
    checkoutScreen.classList.add('hidden');
    renderMenu();
});
</script>

</body>
</html>